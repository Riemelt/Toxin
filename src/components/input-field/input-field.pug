include ../label/label

mixin input-field(vars = {})
  -
    const {
      label,
      hovered,
      value,
      button,
      isReadonly,
      name,
      placeholder = '',
      required = false,
      size = 'big',
      type = 'text',
    } = vars

    const className = 'input-field'
    let classNames = className + ` js-${className}`

    const sizeClass = {
      small: ` ${className}_small`,
      medium: ` ${className}_medium`,
      big: ` ${className}_big`,
    }

    classNames += sizeClass[size]

  if hovered
    - classNames += ` ${className}_hovered`

  -
    const buttonClassName = `${className}__button`
    let buttonClassNames = buttonClassName
  
    const buttonIconClass = {
      expandMore: ` ${buttonClassName}_expandable`,
      arrowForward: ` ${buttonClassName}_subscribable`,
    }

    const buttonThemeClass = {
      primary: ` ${buttonClassName}_primary`,
      secondary: ` ${buttonClassName}_secondary`,
    }

  if button
    -
      const {
        theme,
        icon = 'expandMore',
      } = button

      buttonClassNames += buttonIconClass[icon]
    
    if theme
      - buttonClassNames += buttonThemeClass[theme]

  div(class=classNames)
    if (label)
      div(class=`${className}__header`)
        +label(label)
    label(class=`${className}__label`)
      input(
        class=`${className}__input js-${className}__input`
        type=type
        name=name
        placeholder=placeholder
        readonly=isReadonly
        value=value
        required=required
      )
    if button
      - const { type: buttonType = 'button' } = button
      button(
        class=buttonClassNames
        type=buttonType
      )